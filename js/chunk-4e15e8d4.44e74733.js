(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e15e8d4"],{"3d2e":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("mew-module",{staticClass:"d-flex flex-grow-1 pt-6",attrs:{title:e.title,"has-elevation":!0,"has-indicator":!0},scopedSlots:e._u([{key:"moduleBody",fn:function(){return[t("div",[t("v-textarea",{attrs:{outlined:"",label:"Signature",value:e.message},model:{value:e.message,callback:function(s){e.message=s},expression:"message"}}),t("div",{staticClass:"text-right"},[t("mew-button",{staticClass:"mr-4",attrs:{"btn-style":"light",title:"Clear all"},nativeOn:{click:function(s){return e.clearAll.apply(null,arguments)}}}),t("mew-button",{attrs:{title:"Sign",disabled:e.disableSignBtn},nativeOn:{click:function(s){return e.signMessage.apply(null,arguments)}}})],1)],1)]},proxy:!0}])})},i=[],n=t("2f62"),r=t("dd34"),c={name:"ModuleMessageSign",data(){return{title:"Sign Message",message:"",signature:"",signAndVerify:""}},computed:{...Object(n["e"])("wallet",["instance"]),disableSignBtn(){return""===this.message}},mounted(){this.signAndVerify=new r["a"]},methods:{signMessage(){try{this.signAndVerify.signMessage(this.message).then(()=>{this.message=""}).catch(e=>{this.message="",this.instance.errorHandler(e.message)})}catch(e){this.instance.errorHandler(e.hasOwnProperty("message")?e.message:e)}},clearAll(){this.signature="",this.message=""}}},l=c,o=t("2877"),g=Object(o["a"])(l,a,i,!1,null,"20936e22",null);s["default"]=g.exports},5653:function(e,s,t){"use strict";(function(e){var a=t("5b66");const i=s=>Object(a["isHexString"])(s)?Object(a["toBuffer"])(s):e.from(s);s["a"]=i}).call(this,t("1c35").Buffer)},b7ea:function(e,s,t){"use strict";s["a"]={SIGN_FAILED:"Failed to sign message",INVALID_LENGTH:"Invalid signature length",FAILED_TO_VERIFY:"Failed to verify signature"}},dd34:function(e,s,t){"use strict";(function(e){t.d(s,"a",(function(){return l}));t("e9c4"),t("ac1f"),t("5319");var a=t("5b66"),i=t("5653"),n=t("27ca"),r=t("2f62"),c=t("b7ea");class l{constructor(){this.$store=n["a"],Object.assign(this,Object(r["e"])("wallet",["web3","address","isHardware","identifier"]))}signMessage(e){const s=this;try{return this.web3().eth.sign(e,this.address()).then(e=>(s.signature=JSON.stringify({address:s.address(),msg:s.message,sig:e,version:"3",signer:s.isHardware()?s.identifier():"MEW"},null,2),s.signature))}catch(t){throw c["a"].SIGN_FAILED}}verifyMessage(s){try{const t=JSON.parse(s);let n=Object(a["hashPersonalMessage"])(Object(i["a"])(t.msg));const r=e.from(t.sig.replace("0x",""),"hex");if(65!==r.length)throw c["a"].INVALID_LENGTH;r[64]=0===r[64]||1===r[64]?r[64]+27:r[64],"1"===t.version&&(n=this.web3().utils.sha3(t.msg));const l=Object(a["ecrecover"])(n,r[64],r.slice(0,32),r.slice(32,64));return{verified:!t.address.replace("0x","").toLowerCase()!==Object(a["pubToAddress"])(l).toString("hex").toLowerCase(),signer:Object(a["pubToAddress"])(l).toString("hex").toLowerCase()}}catch(t){throw c["a"].FAILED_TO_VERIFY}}}}).call(this,t("1c35").Buffer)}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-4e15e8d4.44e74733.js.map