(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d4db9e2"],{"530e":function(t,e,s){"use strict";s("8bce")},"8bce":function(t,e,s){},b63b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-dialog",{attrs:{value:t.open,"max-width":"330"},on:{"click:outside":t.reset}},[s("div",{staticClass:"bgWalletBlock pa-7"},[1===t.step?s("div",{staticClass:"full-width"},[s("div",{staticClass:"mew-heading-2 mb-10"},[t._v("Add custom token")]),s("mew-input",{attrs:{value:t.contractAddress,placeholder:"Contract address"},on:{input:t.setContractAddress}})],1):t._e(),2===t.step?s("div",{staticClass:"full-width"},t._l(t.tokenDataToDisplay,(function(e,a){return s("div",{key:a,staticClass:"mb-9",class:[!t.tokenDataToDisplay[a+1]||t.isIcon(t.tokenDataToDisplay[a+1].name)||t.tokenDataToDisplay[a+1].value?"mb-9":"mb-1"],attrs:{"no-gutters":""}},[s("div",{staticClass:"textLight--text mew-body font-weight-bold align-self-center"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"textDark--text"},[t.isIcon(e.name)||t.isContractAddress(e.name)||t.isSymbol(e.name)||!e.value?t._e():s("span",[t._v(" "+t._s(e.value)+" ")]),t.isContractAddress(e.name)?s("mew-transform-hash",{attrs:{"justify-start":"",hash:e.value}}):t._e(),t.isIcon(e.name)&&e.value?s("img",{attrs:{height:"24px",width:"23.5px",src:e.value,alt:"token icon"}}):t._e(),t.isIcon(e.name)&&!e.value?s("div",{staticClass:"token-placeholder mew-caption d-flex align-center justify-center"},[t._v(" NA ")]):t._e(),!t.isIcon(e.name)&&!e.value||t.isSymbol(e.name)?s("mew-input",{class:t.isSymbol(e.name)?"mt-0 mb-n4":"mb-n8",attrs:{id:a,"error-messages":3===a?t.symbolLengthTooLong:t.nameLengthTooLong,value:e.value,placeholder:t.getPlaceholder(e.name)},on:{input:t.setInputValue}}):t._e()],1)])})),0):t._e(),s("div",{staticClass:"d-flex align-center mt-5"},[s("mew-button",{staticClass:"flex-grow-1 mr-1",staticStyle:{"flex-basis":"0"},attrs:{"btn-size":"large","btn-style":"outline",title:"Cancel"},nativeOn:{click:function(e){return t.reset.apply(null,arguments)}}}),s("mew-button",{staticClass:"flex-grow-1 ml-1",staticStyle:{"flex-basis":"0"},attrs:{"btn-size":"large",loading:t.loading,disabled:t.isDisabled,title:1===t.step?"Next":"Add Token"},nativeOn:{click:function(e){return t.next.apply(null,arguments)}}})],1)])])],1)},n=[],o=s("2f62"),i=s("2ef0"),c=s("901e"),l=s.n(c),r=s("1c358"),h=s("9b88"),d=s("d6fd"),m=s("ac8e"),u={props:{open:{default:!1,type:Boolean},close:{default:()=>{},type:Function}},data(){return{contractAddress:"",customName:"",customSymbol:"",symbolLengthTooLong:"",nameLengthTooLong:"",loading:!1,step:1,token:{}}},computed:{...Object(o["e"])("wallet",["web3","address"]),...Object(o["c"])("wallet",["tokensList"]),...Object(o["c"])("external",["contractToToken"]),...Object(o["c"])("custom",["customTokens"]),...Object(o["c"])("global",["getFiatValue"]),tokenDataToDisplay(){return[{name:"Contract",value:this.contractAddress},{name:"Icon",value:this.token.img},{name:"Name",value:this.token.name},{name:"Symbol",value:this.token.symbol}]},isDisabled(){return this.loading||1===this.step&&!this.contractAddress||1===this.step&&!Object(d["a"])(this.contractAddress)||2===this.step&&(this.symbolLengthTooLong.length>0||this.nameLengthTooLong.length>0||!this.hasName||!this.hasSymbol)},hasName(){return this.tokenDataToDisplay[2].value||this.customName},hasSymbol(){return this.customSymbol}},methods:{...Object(o["b"])("custom",["setCustomToken"]),setInputValue:Object(i["debounce"])((function(t,e){if(3==e){if(t&&t.length>8)return void(this.symbolLengthTooLong="Symbol cannot exceed 8 characters");this.symbolLengthTooLong="";let e=!1;if(this.customTokens.concat(this.tokensList).find(s=>{t!==s.symbol||(e=!0)}),e)return this.customSymbol="",void Object(h["e"])("A token with the symbol "+t+" already exists.",{},h["a"]);this.customSymbol=t}else{if(t&&t.length>24)return void(this.nameLengthTooLong="Name cannot exceed 24 characters");this.nameLengthTooLong="",this.customName=t}}),100),isContractAddress(t){return t===this.tokenDataToDisplay[0].name},isIcon(t){return t===this.tokenDataToDisplay[1].name},isSymbol(t){return t===this.tokenDataToDisplay[3].name},getPlaceholder(t){return t===this.tokenDataToDisplay[2].name?"Enter the tokenâ€™s name":"Enter up to 8 characters"},reset(){this.close(),this.step=1,this.token={},this.contractAddress="",this.customName="",this.customSymbol="",this.symbolLengthTooLong="",this.nameLengthTooLong="",this.loading=!1},next(){if(1===this.step)return this.loading=!0,void this.checkIfValidAddress();this.token.name=this.token.name?this.token.name:this.customName,this.token.symbol=this.customSymbol||this.token.symbol,this.token.contract=this.contractAddress,this.setCustomToken(this.token),Object(h["e"])("The token "+this.token.name+" was added to your token list!",{},h["d"]),this.reset()},setContractAddress(t){this.contractAddress=t},async checkIfValidAddress(){const t=await this.web3.eth.getCode(this.contractAddress);this.contractAddress&&Object(d["a"])(this.contractAddress)&&"0x"!==t?this.checkIfTokenExistsAlready():(this.loading=!1,this.contractAddress="",Object(h["e"])("This is not a valid contract address",{},h["a"]))},checkIfTokenExistsAlready(){let t=!1;this.customTokens.concat(this.tokensList).find(e=>{var s;this.contractAddress.toLowerCase()===(null===(s=e.contract)||void 0===s?void 0:s.toLowerCase())&&(t=!0)}),t?(this.contractAddress="",this.loading=!1,Object(h["e"])("A token with this address already exists!",{},h["a"])):this.findTokenInfo()},async findTokenInfo(){const t=new this.web3.eth.Contract(r["a"],this.contractAddress);this.token=this.contractToToken(this.contractAddress)||{};try{const e=await t.methods.balanceOf(this.address).call(),s=await t.methods.decimals().call();if(this.token){const t=new l.a(10).pow(s);this.token.usdBalance=new l.a(e).div(t).times(this.token.price).toString(),this.token.usdBalancef=this.getFiatValue(this.token.usdBalance)?this.getFiatValue(this.token.usdBalance):this.getFiatValue(0)}else this.token.name=await t.methods.name().call(),this.token.symbol=await t.methods.symbol().call(),this.token.usdBalancef="0.00",this.token.contract=this.contractAddress;this.token.decimals=parseInt(s),this.token.balance=e,this.token.balancef=this.getTokenBalance(e,s).value,this.loading=!1,this.step=2}catch{this.token.contract=this.contractAddress,this.token.balancef="0",this.token.usdBalancef="0.00",this.loading=!1,this.step=2}},getTokenBalance(t,e){let s=new l.a(t);return e&&(s=s.div(new l.a(10).pow(e)),s=Object(m["c"])(s)),s}}},b=u,k=(s("530e"),s("2877")),g=Object(k["a"])(b,a,n,!1,null,"4e80dbe4",null);e["default"]=g.exports},d6fd:function(t,e,s){"use strict";s.d(e,"a",(function(){return l})),s.d(e,"b",(function(){return r}));s("ac1f");var a=s("99e5"),n=s.n(a),o=s("27ca"),i=s("913e"),c=s("5b66");const l=t=>{const e=o["a"].getters["global/network"].type.chainID;return e===i["ROOTSTOCK"].chainID?!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(t)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(t))||Object(c["isValidChecksumAddress"])(t,e)):t&&n.a.utils.isHexStrict(t)&&n.a.utils.isAddress(t)},r=t=>{const e=o["a"].getters["global/network"].type.chainID;return e===i["ROOTSTOCK"].chainID?Object(c["toChecksumAddress"])(t,e):n.a.utils.toChecksumAddress(t)}}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-4d4db9e2.812578ae.js.map