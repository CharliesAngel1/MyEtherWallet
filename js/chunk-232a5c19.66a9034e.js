(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-232a5c19"],{"402f":function(e,t,s){},"95c9":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mew-component--module-side-apr pa-5 border-radius--10px box-border"},[s("div",{staticClass:"d-flex align-top justify-space-between mb-1"},[e._m(0),s("div",{staticClass:"text-right"},[s("div",{staticClass:"font-weight-bold mew-heading-3 mb-1"},[e._v(" "+e._s(e.formattedBalance)+" ")]),e.ethvmSupport?s("div",{staticClass:"textLight--text"},[e._v(" "+e._s(e.sethBalanceFiat)+" ")]):e._e()])]),e.hasStaked||e.hasPending?e._e():s("div",{staticClass:"mt-4"},[e._v(" You are currently not staking any "+e._s(e.currencyName)+". To earn rewards start staking. "),s("span",{staticClass:"greenPrimary--text cursor--pointer",on:{click:e.scrollToInput}},[e._v("Start staking")])]),e.isEthNetwork?s("div",e._l(e.stakewiseTxs.ETH,(function(t){return s("div",{key:t.hash,staticClass:"d-flex justify-space-between flex-wrap mt-4"},[s("div",{staticClass:"py-1"},[s("v-progress-circular",{staticClass:"mr-1",attrs:{indeterminate:"",color:"greenPrimary",width:2,size:20}}),e._v(" "+e._s(t.amount)+" "+e._s(e.currencyName)+" Pending ")],1),s("div",{staticClass:"greenPrimary--text font-weight-medium d-flex align-center cursor--pointer py-1",on:{click:function(s){return e.checkHash(t.hash)}}},[e._v(" View on "+e._s(e.ethvmSupport?"EthVM":"EtherScan")+" "),s("v-icon",{staticClass:"ml-1",attrs:{color:"greenPrimary",small:""}},[e._v("mdi-open-in-new")])],1)])})),0):s("div",e._l(e.stakewiseTxs.GOERLI,(function(t){return s("div",{key:t.hash,staticClass:"d-flex justify-space-between mt-4"},[s("div",[s("v-progress-circular",{staticClass:"mr-1",attrs:{indeterminate:"",color:"greenPrimary",width:2,size:20}}),e._v(" "+e._s(t.amount)+" "+e._s(e.currencyName)+" Pending ")],1),s("div",{staticClass:"greenPrimary--text font-weight-medium d-flex align-center cursor--pointer",on:{click:function(s){return e.checkHash(t.hash)}}},[e._v(" View on "+e._s(e.ethvmSupport?"EthVM":"EtherScan")+" "),s("v-icon",{staticClass:"ml-1",attrs:{color:"greenPrimary",small:""}},[e._v("mdi-open-in-new")])],1)])})),0),e.hasStaked?s("div",{staticClass:"d-flex align-center justify-space-between mt-4 flex-wrap-reverse"},[e.isEthNetwork?s("mew-button",{staticClass:"py-1",attrs:{title:"Redeem to "+e.currencyName,"btn-style":"transparent","btn-size":"small",disabled:e.enoughToCoverRedeem},nativeOn:{click:function(t){return e.executeSwap.apply(null,arguments)}}}):e._e(),s("mew-button",{staticClass:"py-1",attrs:{title:"Stake more "+e.currencyName,"btn-style":e.compoundRewards?"background":"transparent","btn-size":"small",disabled:e.enoughToCoverRedeem},nativeOn:{click:function(t){return e.scrollToInput.apply(null,arguments)}}})],1):e._e(),e.enoughToCoverRedeem?s("div",{staticClass:"mt-4 greyPrimary--text"},[e._v(" You do not have enough ETH to cover transaction fee. "),s("a",{attrs:{rel:"noopener noreferrer"},on:{click:e.openBuySell}},[e._v(" Buy more ETH")])]):e._e()])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-center mt-n4"},[a("div",{staticClass:"stake-icon mr-2"},[a("img",{attrs:{src:s("247b"),alt:"Stakewise"}})]),a("div",{staticClass:"textLight--text"},[a("span",{staticClass:"textMedium--text"},[e._v("Staking")]),e._v(" - sETH2 ")])])}],i=(s("ac1f"),s("5319"),s("14d9"),s("2ef0")),r=s("2f62"),c=s("5ba3"),o=s("901e"),l=s.n(o),h=s("28f8"),u=s("573b"),d=s("35f4"),m=s("ac8e"),p=s("54c6"),v={name:"ModuleSideStaking",components:{},mixins:[p["a"]],props:{compoundRewards:{type:Boolean,default:!1},txFee:{type:String,default:""},hasEnoughBalance:{type:Boolean,default:!1}},data(){return{intervals:{}}},computed:{...Object(r["c"])("global",["isEthNetwork","network","getFiatValue"]),...Object(r["c"])("wallet",["tokensList"]),...Object(r["c"])("external",["fiatValue"]),...Object(r["e"])("wallet",["web3","address","balance"]),...Object(r["e"])("stakewise",["stakewiseTxs","sethBalance","rethBalance"]),currencyName(){return this.network.type.currencyName},ethvmSupport(){return this.network.type.isEthVMSupported.supported},enoughToCoverRedeem(){return!(!this.hasStaked&&!this.hasPending)&&(!this.hasEnoughBalance||!(!l()(this.rethBalance).gt(0)||!l()(this.sethBalance).gt(0))&&!l()(this.balance).gt(this.txFee))},linkUrl(){return this.network.type.blockExplorerTX},hasPending(){const e=this.isEthNetwork?this.stakewiseTxs.ETH:this.stakewiseTxs.GOERLI;return e.length>0},formattedBalance(){return Object(m["c"])(this.sethBalance).value},sethBalanceFiat(){return this.getFiatValue(l()(this.sethBalance).times(this.fiatValue).toString())},seth2Contract(){return this.isEthNetwork?h["j"]:h["i"]},hasStaked(){return this.ethvmSupport,l()(this.sethBalance).gt(0)}},watch:{stakewiseTxs:{handler(e){const t=this.isEthNetwork?e.ETH:e.GOERLI;t.length>0&&t.forEach(e=>{this.fetcher(e.hash)})},deep:!0},$route:{handler:function(e){"stake"===e.query.module&&this.$nextTick(()=>{this.$emit("scroll"),this.$emit("set-max")})},deep:!0,immediate:!0}},mounted(){const e=this.isEthNetwork?this.stakewiseTxs.ETH:this.stakewiseTxs.GOERLI;e.length>0&&e.forEach(e=>{this.fetcher(e.hash)})},beforeDestroy(){Object(i["isEmpty"])(this.intervals)&&Object.values(this.intervals).forEach(e=>{clearInterval(e)})},methods:{...Object(r["b"])("stakewise",["removePendingTxs","removePendingTxsGoerli","setStakeBalance"]),executeSwap(){this.$emit("redeem-to-eth","seth",this.sethBalance)},fetchBalance(){const e=new this.web3.eth.Contract(u["a"],this.seth2Contract);e.methods.balanceOf(this.address).call().then(e=>this.setStakeBalance(Object(c["fromWei"])(e)))},checkHash(e){window.open(this.linkUrl.replace("[[txHash]]",e),"_blank")},fetcher(e){this.intervals[e]=setInterval(()=>{this.web3.eth.getTransactionReceipt(e).then(t=>{t&&(clearInterval(this.intervals[e]),this.isEthNetwork?this.removePendingTxs(e):this.removePendingTxsGoerli(e),this.fetchBalance())})},1e4)},changeRoute(){return new Promise(e=>{e(this.$router.push({name:d["a"].CORE.NAME,query:{module:"stake"}}))})},scrollToInput(){this.$emit("scroll"),this.changeRoute().then(()=>{this.$nextTick(()=>{this.$emit("set-max")})})}}},w=v,g=(s("b462"),s("2877")),k=Object(g["a"])(w,a,n,!1,null,"6eb3b293",null);t["default"]=k.exports},b462:function(e,t,s){"use strict";s("402f")}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-232a5c19.66a9034e.js.map