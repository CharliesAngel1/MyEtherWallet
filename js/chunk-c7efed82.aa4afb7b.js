(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c7efed82"],{"4ee7":function(t,e,a){"use strict";a("a77e")},6152:function(t,e,a){"use strict";(function(t){a("e9c4");var i=a("2f62"),s=a("2ef0"),n=a("5ba3"),l=a("9b88"),d=a("7f65");e["a"]={props:{openExitModal:{type:Boolean,default:!1},closeModal:{type:Function,default:()=>{}},selectedValidator:{type:Object,default:()=>{}}},data(){return{loadingButton:!1,loadingSign:!0,loadingStakedCall:!0,exitFinished:!1}},computed:{...Object(i["e"])("wallet",["instance","address"]),...Object(i["c"])("global",["network"]),validatorUrl(){return d["a"].network[this.network.type.name].url},message(){return JSON.stringify({intentToExit:"I am signing this message and requesting that Staked exit the following validators from the network",validatorIndexes:[this.selectedValidator.validator_index],address:this.address})},leftBtn(){return{text:"Cancel",color:"basic",method:this.modalClose}},btnMethod(){return this.loadingSign&&this.loadingStakedCall?this.signAndExit:this.modalClose},btnTitle(){return this.loadingSign&&this.loadingStakedCall?"Sign & Exit":"Close"},withdrawalAddress(){return Object(s["isEmpty"])(this.selectedValidator)?"0x":"0x"+this.selectedValidator.withdrawal_credentials.substring(24,this.selectedValidator.withdrawal_credentials.length)}},methods:{...Object(i["b"])("stakedStore",["addWithdrawalValidatorIndex"]),modalClose(){this.localReset(),this.closeModal()},localReset(){this.loadingButton=!1,this.loadingSign=!0,this.loadingStakedCall=!0,this.exitFinished=!1},async signAndExit(){this.loadingButton=!0;try{const e=await this.instance.signMessage(this.message,this.address),a=Object(n["toHex"])(e);this.loadingSign=!1;const i=t.from("Ethereum Signed Message:\n"+this.message.length.toString()+this.message).toString("hex"),s="ETH"===this.network.type.name?"mainnet":"staging",d=`https://${s}.mewwallet.dev/v2/stake/exit`;await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:this.address,challenge:i.toString("hex"),signature:a})}).then(t=>{if(t.ok)return this.loadingStakedCall=!1,this.loadingButton=!1,this.exitFinished=!0,void this.addWithdrawalValidatorIndex(this.selectedValidator.validator_index);t.json().then(t=>{Object(l["e"])(t.error?t.error:t.msg,{},l["a"]),this.localReset()})})}catch(e){Object(l["e"])(e,{},l["a"]),this.localReset()}}}}}).call(this,a("1c35").Buffer)},a77e:function(t,e,a){},e42c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mew-popup",{attrs:{"max-width":"690px",show:t.openExitModal,"has-buttons":!1,"has-body-content":!0,title:"Exit stake and withdraw","left-btn":t.leftBtn}},[a("div",[a("div",{staticClass:"mb-5 mew-heading-4 text-center pa-4 success-container"},[t._v(" You are exiting validator "),a("a",{attrs:{href:t.selectedValidator.url,target:"_blank",rel:"noopener noreferrer"}},[t._v("#"+t._s(t.selectedValidator.validator_index))]),t._v(" and will receive "+t._s(t.selectedValidator.totalBalanceETH)+" ETH to "),a("b",[t._v(t._s(t.withdrawalAddress))])]),a("div",{staticClass:"mew-body mb-5"},[t._v(" Your validator will be terminated and your staked ETH will be withdrawn. After this is completed, you will no longer be earning staking rewards on Ethereum. Any currently accumulated rewards will be automatically deposited to your designated withdrawal address. The amount of time until staking rewards and the full withdrawn stake appear in your wallet depends on the Ethereum withdrawal queue and can not be influenced by MEW. ")]),a("div",{staticClass:"pb-5"},[a("div",{staticClass:"mew-caption"},[t._v(" Sign message requesting Staked.us to exit your validator(s) from the network: ")]),a("code",[t._v(" "+t._s(t.message)+" ")])]),t.loadingButton||t.exitFinished?a("div",{staticClass:"pb-5"},[a("div",{staticClass:"d-flex align-center pa-2 mb-2 loaders-container"},[a("div",{staticClass:"mr-2"},[t.loadingSign?a("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"32",width:"2"}}):t._e(),t.loadingSign?t._e():a("v-icon",{staticClass:"pa-1",attrs:{size:"24",color:"greenPrimary"}},[t._v(" mdi-checkbox-marked-circle ")])],1),a("div",[t._v(" "+t._s(t.loadingSign?"Signing message":"Message signed")+" ")])]),a("div",{staticClass:"d-flex align-center pa-2 loaders-container"},[a("div",{staticClass:"mr-2"},[t.loadingStakedCall?a("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"32",width:"2"}}):t._e(),t.loadingStakedCall?t._e():a("v-icon",{staticClass:"pa-1",attrs:{size:"24",color:"greenPrimary"}},[t._v(" mdi-checkbox-marked-circle ")])],1),a("div",[t._v(" "+t._s(t.loadingStakedCall?"Sending to Staked.us":"Sent to Staked.us")+" ")])]),t.loadingSign||t.loadingStakedCall?t._e():a("div",{staticClass:"mt-3"},[t._v(" Successfully started exit & withdrawal process! Please check "),a("a",{attrs:{href:""+t.validatorUrl+t.selectedValidator.validator_index,target:"_blank",rel:"noopener noreferrer"}},[t._v("#"+t._s(t.selectedValidator.validator_index))]),t._v(" for up to date status. ")])]):t._e(),a("div",{staticClass:"mb-2 text-center d-flex align-center justify-center"},[t.loadingSign&&t.loadingStakedCall?a("mew-button",{attrs:{title:t.btnTitle,"btn-size":"xlarge",loading:t.loadingButton,disabled:t.loadingButton},nativeOn:{click:function(e){return t.btnMethod.apply(null,arguments)}}}):a("mew-button",{attrs:{title:t.btnTitle,"btn-size":"xlarge",disabled:t.loadingSign||t.loadingStakedCall},nativeOn:{click:function(e){return t.btnMethod.apply(null,arguments)}}})],1)])])},s=[],n=a("6152"),l=n["a"],d=(a("4ee7"),a("2877")),r=Object(d["a"])(l,i,s,!1,null,"b3d489e6",null);e["default"]=r.exports}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-c7efed82.aa4afb7b.js.map