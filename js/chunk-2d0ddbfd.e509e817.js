(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddbfd"],{"835a":function(e,s,d){"use strict";d.r(s);var t=function(){var e=this,s=e.$createElement,d=e._self._c||s;return d("div",{staticClass:"full-width"},[e.addMode?d("mew-input",{attrs:{"show-blockie":!0,label:e.$t("interface.address-book.address"),placeholder:e.$t("interface.address-book.enter-addr"),value:e.addressToAdd,rules:e.addressRules,"persistent-hint":e.validAddress,hint:e.resolvedName||e.nametag||e.coin,"resolved-addr":e.resolvedAddress,autofocus:""},on:{input:e.setAddress}}):e._e(),e.editMode?d("div",{staticClass:"full-width d-flex align-center mb-7"},[d("mew-blockie",{staticClass:"mr-3",attrs:{address:e.item.resolvedAddr?e.item.resolvedAddr:e.item.address,height:"45px",width:"45px"}}),d("div",{staticClass:"truncate"},[d("h5",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.$t("interface.address-book.address"))+" ")]),d("div",{staticClass:"d-flex align-center"},[d("span",{staticClass:"monospace mr-3 truncate",attrs:{id:"item-addr"}},[e._v(" "+e._s(e.checksumAddressToAdd)+" ")]),d("mew-copy",{attrs:{"copy-value":e.item.address,tooltip:e.$t("common.copy")}})],1)])],1):e._e(),d("mew-input",{staticClass:"mt-2",attrs:{label:e.$t("interface.address-book.nickname"),placeholder:e.nickname?e.nickname:e.$t("interface.address-book.enter-nickname"),value:e.nickname,rules:e.nicknameRules},on:{input:e.setNickname}}),d("div",{staticClass:"text-center mt-4"},[d("mew-button",{attrs:{disabled:e.disabled,title:e.editMode?e.$t("interface.address-book.update"):e.$t("common.confirm-add"),"btn-size":"xlarge"},nativeOn:{click:function(s){e.editMode?e.update():e.add()}}})],1),e.editMode?d("div",{staticClass:"mt-4 text-center"},[d("mew-button",{attrs:{title:e.$t("interface.address-book.remove-addr"),"has-full-width":!1,"btn-size":"small","btn-style":"transparent"},nativeOn:{click:function(s){return e.remove.apply(null,arguments)}}})],1):e._e()],1)},i=[],r=(d("caad"),d("14d9"),d("2f62")),o=d("2ef0"),a=d("48b6"),n=d("677b"),l=d("d6fd"),h=d("1b74"),c=d.n(h);const v=["Ethereum","Bitcoin","Algorand","AuroraCoin","BeaverCoin","BioCoin","Bitcoin SV","BitcoinCash","BitcoinGold","BitcoinPrivate","BitcoinZ","Cardano","Crypto.com Coin","Dash","Decred","DigiByte","DogeCoin","FreiCoin","GarliCoin","Hush","HyperSpace","Komodo","LBRY Credits","Lisk","LiteCoin","loki","MegaCoin","MonaCoin","Monero","NameCoin","Nano","Nem","Neo","NeoGas","PeerCoin","PIVX","Polkadot","PrimeCoin","ProtoShares","Qtum","RaiBlocks","Ripple","Siacoin","SnowGem","SolarCoin","Stellar","Tether","Tezos","Tron","VertCoin","VoteCoin","Waves","ZCash","ZClassic","ZenCash"];function u(e){for(const s of v)if(c.a.validate(e,s))return{coin:s,valid:!0};return{coin:"",valid:!1}}const m=["add","edit"];var A={name:"AddressBookAddEdit",props:{mode:{default:m[0],type:String},item:{default:()=>{},type:Object},toAddress:{default:"",type:String}},data(){return{resolvedAddr:"",nameResolver:null,currentIdx:null,nickname:"",addressToAdd:"",nametag:""}},computed:{...Object(r["e"])("wallet",["address","web3"]),...Object(r["e"])("addressBook",["addressBookStore"]),...Object(r["c"])("global",["network"]),disabled(){var e,s;return this.addMode?!this.addressToAdd||!this.validAddress||Object(o["isEmpty"])(this.nickname)||(null===(e=this.nickname)||void 0===e?void 0:e.length)>20||this.alreadyExists:!this.editMode||(this.nickname===this.item.nickname||(null===(s=this.nickname)||void 0===s?void 0:s.length)>20||Object(o["isEmpty"])(this.nickname))},addressRules(){return[()=>!this.alreadyExists||this.$t("interface.address-book.validations.already-exists"),this.validAddress||this.$t("interface.address-book.validations.invalid-address"),e=>!!e||this.$t("interface.address-book.validations.addr-required")]},nicknameRules(){return[e=>e&&e.length>=1||this.$t("interface.address-book.validations.nickname-required"),e=>e&&e.length<=20||this.$t("interface.address-book.validations.nickname-length")]},validAddress(){var e;return!(this.addressToAdd.length>94)&&(this.resolvedAddr.length>0&&(null===(e=this.resolvedAddr)||void 0===e||!e.includes("."))?Object(l["a"])(this.resolvedAddr)||u(this.resolvedAddr).valid:Object(l["a"])(this.lowercaseAddressToAdd)||u(this.lowercaseAddressToAdd).valid||u(this.addressToAdd).valid)},coin(){return this.validAddress?`Valid ${this.coinType} address`:""},coinType(){var e;return this.resolvedAddr.length>0&&(null===(e=this.resolvedAddr)||void 0===e||!e.includes("."))?u(this.resolvedAddr).coin:u(this.lowercaseAddressToAdd).coin||u(this.addressToAdd).coin},editMode(){return this.mode===m[1]},addMode(){return this.mode===m[0]},isMyAddress(){var e,s,d,t;return(null===(e=this.address)||void 0===e?void 0:e.toLowerCase())===(null===(s=this.addressToAdd)||void 0===s?void 0:s.toLowerCase())||(null===(d=this.address)||void 0===d?void 0:d.toLowerCase())===(null===(t=this.resolvedAddr)||void 0===t?void 0:t.toLowerCase())},alreadyExists(){return!!this.addMode&&(!!this.isMyAddress||(this.checkResolvedExists||this.checkAddressExists))},checkResolvedExists(){return Object.keys(this.addressBookStore).some(e=>{var s,d;const t=this.addressBookStore[e];return""!==this.resolvedAddr&&(t.address.toLowerCase()===(null===(s=this.resolvedAddr)||void 0===s?void 0:s.toLowerCase())||t.resolvedAddr.toLowerCase()===(null===(d=this.resolvedAddr)||void 0===d?void 0:d.toLowerCase()))})},checkAddressExists(){return Object.keys(this.addressBookStore).some(e=>{var s,d,t;const i=this.addressBookStore[e];return""!==i.resolvedAddr&&(null===(s=i.resolvedAddr)||void 0===s?void 0:s.toLowerCase())===(null===(d=this.addressToAdd)||void 0===d?void 0:d.toLowerCase())||i.address.toLowerCase()===(null===(t=this.addressToAdd)||void 0===t?void 0:t.toLowerCase())})},checksumAddressToAdd(){return""!==this.addressToAdd&&Object(l["a"])(this.lowercaseAddressToAdd)?Object(l["b"])(this.lowercaseAddressToAdd):this.addressToAdd},lowercaseAddressToAdd(){return this.addressToAdd.toLowerCase()},resolvedAddress(){var e;return 0===this.resolvedAddr.length||!this.validAddress||null!==(e=this.resolvedAddr)&&void 0!==e&&e.includes(".")?"":this.resolvedAddr},resolvedName(){var e;return 0===this.resolvedAddr.length?"":this.validAddress&&null!==(e=this.resolvedAddr)&&void 0!==e&&e.includes(".")?this.resolvedAddr:""}},watch:{toAddress(e){this.addressToAdd=e},addressToAdd(e){this.nametag="",Object(l["a"])(e.toLowerCase())?this.resolveAddress():this.resolveName()},web3(){this.network.type.ens?this.nameResolver=new n["a"](this.network,this.web3):this.nameResolver=null}},mounted(){this.network.type.ens&&(this.nameResolver=new n["a"](this.network,this.web3)),this.addMode&&this.toAddress&&(this.addressToAdd=this.toAddress),this.editMode&&(this.addressToAdd=this.item.address,this.nickname=this.item.nickname,this.currentIdx=this.addressBookStore.findIndex(e=>e.address===this.item.address))},methods:{...Object(r["b"])("addressBook",["setAddressBook"]),reset(){this.addressToAdd="",this.nickname="",this.resolvedAddr="",this.nametag=""},resolveAddress:Object(o["throttle"])((async function(){if(this.nameResolver)try{const e=await this.nameResolver.resolveAddress(this.addressToAdd);e&&!e.name&&await Object(a["getAddressInfo"])(this.checksumAddressToAdd,"https://ipfs.kleros.io").then(e=>{this.nametag=(null===e||void 0===e?void 0:e.publicNameTag)||""}),this.resolvedAddr=e.name?e.name:""}catch(e){this.nametag="",this.resolvedAddr=""}}),300),resolveName:Object(o["throttle"])((async function(){if(this.nameResolver)try{await this.nameResolver.resolveName(this.addressToAdd).then(e=>{this.resolvedAddr=e})}catch(e){this.resolvedAddr=""}}),500),setAddress(e){this.addressToAdd=e||""},setNickname(e){this.nickname=e},update(){this.addressBookStore[this.currentIdx].address=this.checksumAddressToAdd,this.addressBookStore[this.currentIdx].coinType=this.coinType.toLowerCase(),this.addressBookStore[this.currentIdx].nickname=this.nickname,this.setAddressBook(this.addressBookStore),this.$emit("back",[3])},remove(){this.addressBookStore.splice(this.currentIdx,1),this.setAddressBook(this.addressBookStore),this.reset(),this.$emit("back",[3])},add(){this.alreadyExists?this.reset():(this.addressBookStore.push({address:this.checksumAddressToAdd,resolvedAddr:this.resolvedAddress,coinType:this.coinType.toLowerCase(),nickname:this.nickname||(this.addressBookStore.length+1).toString()}),this.setAddressBook(this.addressBookStore),this.reset(),this.$emit("back",[3]))}}},k=A,b=d("2877"),w=Object(b["a"])(k,t,i,!1,null,null,null);s["default"]=w.exports}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-2d0ddbfd.e509e817.js.map