(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26533e56"],{"0f3a":function(e,t,s){},"14cc":function(e,t,s){"use strict";s("7e38")},"1d83":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pa-8 moonpay-sell-component"},[s("div",{staticClass:"mt-2"},[s("div",{staticClass:"mb-2 d-flex align-center justify-space-between"},[s("div",{staticClass:"font-weight-medium textDark--text"},[e._v(" How much do you want to sell? ")]),e.loading||e.fetchingBalance?e._e():s("button-balance",{staticStyle:{position:"relative",top:"0",right:"0"},attrs:{balance:e.selectedBalance,loading:e.loading}})],1),s("div",{staticClass:"d-flex align-start"},[(e.inWallet,s("mew-input",{staticClass:"no-right-border",staticStyle:{"max-width":"251px","max-height":"86px"},attrs:{"hide-clear-btn":"",type:"number",placeholder:"Enter amount to sell","max-btn-obj":e.maxButton,disabled:e.loading,"error-messages":e.errorMessages,"persistent-hint":e.hasPersistentHint,hint:e.persistentHintMessage},nativeOn:{keydown:function(t){return e.preventCharE(t)}},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})),s("div",{staticClass:"d-flex align-center token-select-button",on:{click:function(t){e.openTokenSelect=!0}}},[s("mew-token-container",{attrs:{img:e.selectedCurrency.img,size:"28px"}}),s("div",{staticClass:"basic--text",staticStyle:{"margin-left":"8px"}},[e._v(" "+e._s(e.selectedCurrency.name)+" ")]),s("v-icon",{staticClass:"ml-auto",attrs:{size:"20px",color:"titlePrimary"}},[e._v(" mdi-chevron-down ")])],1)],1)]),s("div",{staticClass:"mt-2"},[s("div",{staticClass:"font-weight-medium textDark--text mb-2"},[e._v("You will get")]),s("div",{staticClass:"d-flex align-start"},[s("mew-input",{staticClass:"no-right-border",attrs:{"is-read-only":"",value:e.cryptoAmount,"hide-clear-btn":"",type:"number"}}),s("mew-select",{staticClass:"selectedFiat no-left-border",staticStyle:{"max-width":"135px"},attrs:{items:e.fiatCurrencyItems,"is-custom":""},model:{value:e.selectedFiat,callback:function(t){e.selectedFiat=t},expression:"selectedFiat"}})],1)]),e.inWallet?e._e():s("div",{staticClass:"mt-2"},[s("div",{staticClass:"font-weight-medium textDark--text mb-2"},[e._v(" What wallet are you sending your crypto from? ")]),s("module-address-book",{ref:"addressInput",attrs:{label:"Enter Crypto Address","enable-save-address":!1,"is-home-page":!0},on:{setAddress:e.setAddress}})],1),s("div",{staticClass:"pt-2 pb-10"},[s("div",{staticClass:"mew-body textMedium--text"},[e._v(" After submitting your sell order, you will have to send your crypto to Moonpay. Make sure to have enough currency in your wallet to cover network transaction fees. ")]),e.inWallet?s("div",{staticClass:"d-flex align-center justify-space-between mt-4"},[s("div",{staticClass:"mew-body textMedium--text"},[e._v("Estimated Network Fee")]),e.estimatingFees?s("v-skeleton-loader",{attrs:{type:"text",width:"150px"}}):s("div",{staticClass:"mew-body textMedium--text"},[e._v(" ~"+e._s(e.txFeeInEth)+" ")])],1):e._e()]),s("mew-button",{attrs:{title:"SELL WITH MOONPAY","btn-size":"xlarge","has-full-width":"",disabled:e.disableSell,"is-valid-address-func":e.isValidToAddress},nativeOn:{click:function(t){return e.sell.apply(null,arguments)}}}),s("buy-sell-token-select",{attrs:{open:e.openTokenSelect,"currency-items":e.currencyItems,"selected-currency":e.selectedCurrency,"set-currency":e.setCurrency,"in-wallet":e.inWallet,"is-sell":""},on:{close:function(t){e.openTokenSelect=!1}}})],1)},n=[],a=(s("13d5"),s("14d9"),s("caad"),s("1b74")),r=s.n(a),c=s("2f62"),l=s("2ef0"),o=s("901e"),d=s.n(o),u=s("5ba3"),h=s("99e5"),m=s.n(h),b=s("217a"),f=s("9b88"),y=s("ab74"),p=s("08e1"),v=s("1c358"),g=s("ac8e"),k=s("b3e3"),T=s("02c9"),w=s("6b64"),C=s("4b90"),x=s("225b"),A=s("e745"),O={name:"ModuleSellEth",components:{ButtonBalance:()=>s.e("chunk-31b3e5d3").then(s.bind(null,"ad29")),ModuleAddressBook:C["default"],BuySellTokenSelect:x["a"]},mixins:[w["a"]],props:{orderHandler:{type:Object,default:()=>{}},close:{type:Function,default:()=>{}},inWallet:{type:Boolean,default:!1},defaultCurrency:{type:Object,default:()=>{}}},data(){return{selectedFiat:{name:"USD",value:"USD",img:s("1db4")},openTokenSelect:!1,selectedCurrency:this.defaultCurrency,amount:"0",fetchedData:{},locGasPrice:"0",sendHandler:{},loading:!0,hasPersistentHint:!1,fetchingBalance:!0,gasLimit:21e3,estimatingFees:!0,maxBalance:"0",selectedBalance:"0",toAddress:"",validToAddress:!1,currencyRates:[]}},computed:{...Object(c["e"])("wallet",["address","instance","web3"]),...Object(c["e"])("global",["gasPriceType"]),...Object(c["c"])("wallet",["balanceInETH","balanceInWei","tokensList"]),...Object(c["c"])("global",["isEthNetwork","network","gasPriceByType"]),...Object(c["c"])("external",["contractToToken"]),fiatCurrencyItems(){const e=this.hasData?this.fetchedData.fiat_currencies.filter(e=>"RUB"!==e):["USD"];return Object(A["b"])(e)},persistentHintMessage(){return this.hasPersistentHint?`Max adjusted to leave sufficient ${this.selectedCurrency.symbol} for network fee`:""},maxButton(){return d()(this.selectedBalance).gt(0)?{title:"Max",method:this.setMax,disabled:this.nonMainnetMetamask||d()(this.txFee).gte(this.selectedBalance)}:{}},currencyConfig(){const e=this.selectedFiat.value,t=this.currencyRates[e],s=e;return{rate:t,currency:s}},preselectedCurrencies(){if(this.inWallet)return T["b"].reduce((e,t)=>{const s=this.tokensList.find(e=>{if(e.contract.toLowerCase()===t.toLowerCase())return e});if(s)return s.price=Object(g["b"])(s?s.price:"0").value,e.push(s),e;const i=this.contractToToken(t);return i&&(i.price=Object(g["b"])(i?i.price:"0",this.currencyConfig).value,e.push(i)),e},[]);const e=new Array;for(const t of T["b"]){const s=this.contractToToken(t);s&&(s.price=Object(g["b"])(s?s.price:"0").value,e.push(s))}return e},currencyItems(){const e=this.preselectedCurrencies.map(e=>(e.name=e.symbol,e));return e},supportedCurrency(){return["ETH","USDT","USDC","MATIC","BNB"]},supportedNetworks(){return["ETH","MATIC","BSC"]},name(){return this.supportedCurrency.includes(this.selectedCurrency.symbol)?this.selectedCurrency.symbol:this.network.type.currencyName},disableSell(){return!this.amount||""===this.amount||d()(this.amount).eq(0)||this.loading||""!==this.errorMessages||!this.actualValidAddress},min(){if(!Object(l["isEmpty"])(this.fetchedData)){const e=this.fetchedData.limits.find(e=>e.crypto_currency===this.name&&"WEB"===e.type);if(e)return d()(e.limit.min)}return d()(.015)},max(){if(!Object(l["isEmpty"])(this.fetchedData)){const e=this.fetchedData.limits.find(e=>e.crypto_currency===this.name&&"WEB"===e.type);if(e)return d()(e.limit.max)}return d()(3)},txFee(){return Object(u["fromWei"])(d()(this.locGasPrice).times(this.gasLimit).toString())},txFeeInEth(){return`${d()(this.txFee).decimalPlaces(4)} ${this.network.type.currencyName}`},errorMessages(){var e;const t=null!==(e=this.selectedCurrency)&&void 0!==e&&e.symbol?this.name:this.network.type.currencyName,s=d()(this.amount);if(this.nonMainnetMetamask)return"Please switch your network to the Ethereum Mainnet on Metamask.";if(d()(this.selectedBalance).eq(0)&&this.actualValidAddress)return"Address provided has no "+this.selectedCurrency.symbol;if(s.isNaN()||s.eq(0))return"Amount required";if(s.lt(0))return"Amount can't be negative.";if(s.gt(0)&&s.lt(this.min))return`The minimum amount to sell is ${this.min.toString()} ${t}.`;if(s.gt(0)&&s.gt(this.max))return`The maximum amount to sell is ${this.max.toString()} ${t}.`;if(this.inWallet){if(s.gt(this.selectedBalance))return`You do not have enough ${t} to sell.`;if(!Object(l["isEmpty"])(this.sendHandler)&&!this.sendHandler.hasEnoughBalance())return"You do not have enough ETH to pay for network fee."}else if(this.actualValidAddress&&this.isValidAmount&&!this.hasEnoughAssets)return"Address provided does not have enough balance to complete the transaction";return this.amount&&!y["a"].helpers.hasValidDecimals(this.amount,this.selectedCurrency.decimals)?"Invalid decimals! Max decimals for selected currency is "+this.selectedCurrency.decimals:""},nonMainnetMetamask(){var e;return this.instance&&this.instance.identifier===b["a"].WEB3_WALLET&&"ETH"!==(null===(e=this.network)||void 0===e?void 0:e.type.name)},isValidAmount(){var e;return!!this.amount&&(!!Object(l["isNumber"])(null===(e=this.selectedCurrency)||void 0===e?void 0:e.decimals)&&(!d()(this.amount).lt(0)&&y["a"].helpers.hasValidDecimals(this.amount,this.selectedCurrency.decimals)))},getCalculatedAmount(){const e=new d.a(this.amount?this.amount:0).times(new d.a(10).pow(this.selectedCurrency.decimals)).toFixed(0);return Object(u["toBN"])(e)},getAmountBN(){if(!this.isValidAmount)return Object(u["toBN"])(0);const e=Object(k["b"])(this.amount?this.amount:0,this.selectedCurrency.decimals);return Object(u["toBN"])(e)},hasEnoughAssets(){try{const e=Object(k["b"])(this.selectedBalance,this.selectedCurrency.decimals);return Object(u["toBN"])(e).gte(this.getAmountBN)}catch(e){return Object(f["e"])(e,{},f["a"]),!1}},actualAddress(){return this.inWallet?this.address:this.toAddress},actualValidAddress(){return!!this.inWallet||this.validToAddress},hasData(){return!Object(l["isEmpty"])(this.fetchedData)},cryptoAmount(){return d()(this.amount).times(this.priceOb.price).toString()},selectedFiatName(){return this.selectedFiat.name},priceOb(){return Object(l["isEmpty"])(this.fetchedData)?{crypto_currency:"ETH",fiat_currency:"USD",price:"3379.08322"}:this.fetchedData.prices.find(e=>e.fiat_currency===this.selectedFiatName)}},watch:{toAddress(){this.amount="0"},selectedCurrency:{handler:function(e){this.maxBalance="0",this.hasPersistentHint=!1,this.selectedBalance="0",!Object(l["isEmpty"])(this.sendHandler)&&this.selectedCurrency.hasOwnProperty("name")&&this.sendHandler.setCurrency(e),this.fetchSellInfo()},deep:!0},selectedFiat:{handler:function(e,t){Object(l["isEqual"])(e,t)||this.$emit("selectedFiat",e)},deep:!0},amount(e){this.debouncedSetAmount(e)},gasPriceType(e){this.locGasPrice=this.gasPriceByType(e)},locGasPrice(e){this.sendHandler.setLocalGasPrice(e)},gasLimit(e){this.sendHandler.setGasLimit(e)},orderHandler:{handler:function(){this.sendHandler=new y["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType)},deep:!0},network(){this.maxBalance="0",this.hasPersistentHint=!1,this.selectedBalance="0",this.amount="0",this.selectedCurrency={},this.selectedCurrency=this.defaultCurrency,this.supportedNetworks.includes(this.network.type.name)&&(this.sendHandler=new y["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType))}},mounted(){this.inWallet||this.$refs.addressInput.$refs.addressSelect.clear(),this.sendHandler=new y["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType)},methods:{...Object(c["b"])("external",["setCoinGeckoTokens"]),setAddress(e,t,s){"RESOLVED"!==s.type||s.value.includes(".")?this.toAddress=e:this.toAddress=s.value,this.validToAddress=t,this.validToAddress&&(this.sendHandler.setFrom(this.toAddress),this.fetchSellInfo())},getEthBalance(){if(!this.actualValidAddress)return;const e=this.inWallet?this.web3:new m.a(this.network.url);e.eth.getBalance(this.actualAddress).then(e=>{this.fetchingBalance=!1,this.selectedBalance=Object(u["fromWei"])(e)})},getTokenBalance(){if(!this.actualValidAddress)return;const e=this.inWallet?this.web3:new m.a(this.network.url),t=new e.eth.Contract(v["a"],this.selectedCurrency.contract);t.methods.balanceOf(this.actualAddress).call().then(e=>{this.fetchingBalance=!1,this.selectedBalance=d()(e).div(d()(10).pow(this.selectedCurrency.decimals)).toString()})},debouncedSetAmount:Object(l["debounce"])((function(e){if(d()(e).eq(this.maxBalance)||(this.hasPersistentHint=!1),!d()(e).lt(0)&&e&&!Object(l["isEmpty"])(this.sendHandler)&&this.isValidAmount&&this.inWallet){var t;const s=d()(e||0).times(d()(10).pow(null!==(t=this.selectedCurrency)&&void 0!==t&&t.decimals?this.selectedCurrency.decimals:18)).toString();this.sendHandler.setValue(s),""===this.errorMessages&&this.hasEnoughAssets&&(this.estimatingFees=!0,this.sendHandler.estimateGas().then(e=>{this.estimatingFees=!1,this.gasLimit=e}).catch(e=>{Object(f["e"])(e,{},f["a"])}))}}),500),setCurrency(e){this.amount="0",this.selectedCurrency=e},setMax(){if(this.selectedCurrency.contract!==p["a"]||this.inWallet){const e=this.sendHandler.getEntireBal();this.amount=e?d()(e).div(d()(10).pow(this.selectedCurrency.hasOwnProperty("name")?this.selectedCurrency.decimals:18)).toString():this.selectedBalance}else this.amount=d()(this.max).lt(this.selectedBalance)?this.max.toString():d()(this.selectedBalance).minus(this.txFee).toString();this.maxBalance=this.amount,this.hasPersistentHint=!0},sell(){this.orderHandler.sell(this.name,this.amount,this.actualAddress).then(()=>{this.amount="0",this.close(),this.selectedCurrency=this.defaultCurrency}).catch(e=>{Object(f["e"])(e,{},f["a"]),this.amount="0",this.close(),this.selectedCurrency=this.defaultCurrency})},fetchSellInfo(){this.actualValidAddress&&this.selectedCurrency.contract?(this.fetchingBalance=!0,this.selectedCurrency.contract===p["a"]?this.getEthBalance():this.getTokenBalance(),this.hasEnoughAssets&&(this.sendHandler.setFrom(this.actualAddress),this.sendHandler.setCurrency(this.selectedCurrency),this.sendHandler.setValue(this.getCalculatedAmount),this.sendHandler.setTo("0xDECAF9CD2367cdbb726E904cD6397eDFcAe6068D","TYPED"),this.estimatingFees=!0,this.sendHandler.estimateGas().then(e=>{this.estimatingFees=!1,this.gasLimit=e}).catch(e=>{Object(f["e"])(e,{},f["a"])}))):(this.fetchingBalance=!1,this.selectedBalance=Object(u["fromWei"])("0")),this.orderHandler.getSupportedFiatToSell(this.name).then(e=>{this.loading=!1,this.fetchedData=e[0]}).catch(e=>{this.loading=!1,Object(f["e"])(e,{},f["a"])})},isValidToAddress(e){return r.a.validate(e,this.selectedCurrency.symbol)},preventCharE(e){"e"===e.key&&e.preventDefault()}}},N=O,S=(s("14cc"),s("7d7f"),s("2877")),B=Object(S["a"])(N,i,n,!1,null,"04d4e172",null);t["default"]=B.exports},6379:function(e,t){var s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEthBalance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hash"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getEthBalance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"hash"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getLatestPrices"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getLatestPrices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"symbol"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contract"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current_price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"market_cap"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_volume"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price_change_percentage_24h"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_supply"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"subscribeToAccountBalance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddressEventType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockNumber"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:448}};s.loc.source={body:"query getEthBalance($hash: String!) {\n  getEthBalance(owner: $hash) {\n    balance\n  }\n}\n\nquery getLatestPrices {\n  getLatestPrices {\n    id\n    symbol\n    name\n    image\n    contract\n    current_price\n    market_cap\n    total_volume\n    price_change_percentage_24h\n    total_supply\n  }\n}\n\nsubscription subscribeToAccountBalance(\n  $owner: String!\n  $event: AddressEventType!\n) {\n  addressEvent(owner: $owner, event: $event) {\n    blockNumber\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var s=e.type;"NamedType"===s.kind&&t.add(s.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}var n={};function a(e,t){for(var s=0;s<e.definitions.length;s++){var i=e.definitions[s];if(i.name&&i.name.value==t)return i}}function r(e,t){var s={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(s.loc=e.loc);var i=n[t]||new Set,r=new Set,c=new Set;i.forEach((function(e){c.add(e)}));while(c.size>0){var l=c;c=new Set,l.forEach((function(e){if(!r.has(e)){r.add(e);var t=n[e]||new Set;t.forEach((function(e){c.add(e)}))}}))}return r.forEach((function(t){var i=a(e,t);i&&s.definitions.push(i)})),s}(function(){s.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),n[e.name.value]=t}}))})(),e.exports=s,e.exports["getEthBalance"]=r(s,"getEthBalance"),e.exports["getLatestPrices"]=r(s,"getLatestPrices"),e.exports["subscribeToAccountBalance"]=r(s,"subscribeToAccountBalance")},"6b64":function(e,t,s){"use strict";var i=s("2f62"),n=s("6379"),a=s("9b88");t["a"]={name:"HandlerWallet",data(){return{getLatestPrices:"",tokensData:{}}},apollo:{getLatestPrices:{query:n["getLatestPrices"],pollInterval:6e5,result({data:e}){this.tokensData=new Map,e&&e.getLatestPrices&&(e.getLatestPrices.forEach(e=>{this.tokensData.set(e.id,e)}),this.setCoinGeckoTokens(this.tokensData))},error(e){Object(a["e"])(e.message,{},a["a"])}}},methods:{...Object(i["b"])("external",["setCoinGeckoTokens"])}}},"7d7f":function(e,t,s){"use strict";s("0f3a")},"7e38":function(e,t,s){},ab74:function(e,t,s){"use strict";s("bf19");var i=s("5ba3"),n=s("d6fd"),a=s("7466"),r=s("ced0"),c=s("2f62"),l=s("27ca"),o={INVALID_TO_ADDRESS:"Invalid to address",INVALID_FROM_ADDRESS:"Invalid from address",INVALID_DATA_HEX:"Invalid hex string for data",NEGATIVE_VALUE:"negative value"},d=s("6e11"),u=s.n(d),h=s("08e1"),m=s("6013"),b=s("2ef0"),f=s("901e"),y=s.n(f),p=s("ac8e");class v{constructor(){this.$store=l["a"],Object.assign(this,Object(c["e"])("wallet",["balance","web3","address"])),Object.assign(this,Object(c["c"])("global",["network"])),this.currency=null,this.localGasPrice="0",this.TX={from:"0x",to:"0x",destination:"0x",nonce:"0x",gasPrice:"0x",gas:"0x5208",value:"0x",destinationValue:"0x",data:"0x"}}setTo(e,t){if(!Object(n["a"])(e))throw o.INVALID_TO_ADDRESS;this.TX.destination=e,this.TX.toDetails=t}_setTo(){this.TX.to=this.isToken()?Object(i["toChecksumAddress"])(this.currency.contract):Object(i["toChecksumAddress"])(this.TX.destination)}setFrom(e){if(!Object(n["a"])(e))throw o.INVALID_FROM_ADDRESS;this.TX.from=e}_setGasPrice(){this.TX.gasPrice=Object(i["toHex"])(Object(i["toBN"])(this.localGasPrice))}setGasLimit(e){this.TX.gas=Object(i["toHex"])(Object(i["toBN"])(e))}setLocalGasPrice(e){this.localGasPrice=Object(i["toHex"])(Object(i["toBN"])(e))}setValue(e){(isNaN(e)||Object(b["isNull"])(e))&&(e=0);const t=new y.a(e);if(t.lt(0))throw o.NEGATIVE_VALUE;this.TX.destinationValue=Object(i["toHex"])(t.toFixed())}_setValue(){this.isToken()?(this.TX.value="0x00",this.setData(this.getTokenTransferABI(this.TX.destinationValue,this.TX.destination))):this.TX.value=Object(i["toHex"])(Object(i["toBN"])(this.TX.destinationValue))}setData(e){if(!Object(i["isHexStrict"])(e))throw o.INVALID_DATA_HEX;this.TX.data=Object(a["a"])(e)}setNonce(e){this.TX.nonce=Object(i["toHex"])(Object(i["toBN"])(e))}setCurrency(e){this.currency=e,this.TX.data="0x"}getEntireBal(){if(this.isToken())return this.currency.balance;const e=Object(i["toBN"])(this.localGasPrice),t=e.mul(Object(i["toBN"])(this.TX.gas));return this.balance().gt(this.balance().sub(t))?this.balance().sub(t):0}txFee(){return Object(i["toBN"])(this.localGasPrice).mul(Object(i["toBN"])(this.TX.gas))}estimateGas(){return this.address()&&this.setFrom(this.address()),this._setTo(),this._setValue(),this._setGasPrice(),this.web3().eth.estimateGas({data:this.TX.data,from:this.TX.from,to:this.TX.to,value:this.TX.value})}isToken(){var e;return(null===(e=this.currency)||void 0===e?void 0:e.contract)!==h["a"]}hasEnoughBalance(){const e=Object(i["toBN"])(this.TX.destinationValue);if(this.isToken()&&this.currency.balance){const t=e.lte(Object(p["h"])(this.currency.balance)),s=this.txFee().lte(this.balance());return t&&s}return e.add(this.txFee()).lte(this.balance())}getTokenTransferABI(e,t){e=Object(i["toBN"])(e);const s=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],n=new u.a(s);return n.methods.transfer(t.toLowerCase(),e).encodeABI()}async submitTransaction(){try{this._setTo(),this._setValue(),this._setGasPrice();const e=await this.web3().eth.getTransactionCount(this.address());this.setNonce(e),this.TX.gasLimit=this.TX.gas;const t=r["Transaction"].fromTxData(this.TX),s=t.toJSON(!0);return s.from=this.address(),s.toDetails=this.TX.toDetails,this.web3().eth.sendTransaction(s)}catch(e){return e}}}v.helpers={hasValidDecimals:m["a"]};t["a"]=v},bf19:function(e,t,s){"use strict";var i=s("23e7"),n=s("c65b");i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return n(URL.prototype.toString,this)}})}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-26533e56.5409a73c.js.map